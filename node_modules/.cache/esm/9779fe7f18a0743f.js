let Building;_18a‍.x([["buildings",()=>buildings],["building",()=>building],["addBuilding",()=>addBuilding],["modifyBuilding",()=>modifyBuilding],["deleteBuilding",()=>deleteBuilding]]);_18a‍.w("../../models/Building",[["default",["Building"],function(v){Building=v}]]);

// * Query
// List all buildings with filter :creationDate and dealType
       const buildings = async (
	_,
	{ creationDate = -1, dealType, field, fieldOrder },
) => {
	try {
		let buildings;
		if (!dealType) {
			if (field === 'rights') {
				buildings = await Building.find({}).sort({
					[`dealInfo.${field}`]: fieldOrder,
				});
			} else {
				buildings = await Building.find({}).sort({ creationDate });
			}
		} else {
			buildings = await Building.find({
				[`dealInfo.${dealType}.price`]: { $ne: null },
			}).sort({
				[`dealInfo.${dealType}.${field}`]: fieldOrder,
			});
		}

		return buildings;
	} catch (e) {
		_18a‍.g.console.log(e);
	}
};

// get information about a specific building with id or name
       const building = async (_, { id }) => {
	try {
		let building;
		if (id) building = await Building.findById(id);

		return building;
	} catch (e) {
		_18a‍.g.console.log(e);
	}
};

// * Mutation
// add building information
       const addBuilding = async (_, { buildingInput }) => {
	try {
		const building = new Building({
			...buildingInput,
		});

		await building.save();

		return building;
	} catch (e) {
		_18a‍.g.console.log(e);
	}
};

// modify building information with id
       const modifyBuilding = async (_, { id, buildingInput }) => {
	try {
		const building = await Building.findOneAndUpdate(
			{ _id: id },
			{
				...buildingInput,
			},
			{ new: true },
		);

		return building;
	} catch (e) {
		_18a‍.g.console.log(e);
	}
};

// delete building information with id
       const deleteBuilding = async (_, { id }) => {
	try {
		const deletedBuilding = await Building.findOneAndRemove({ _id: id });

		return deletedBuilding;
	} catch (e) {
		_18a‍.g.console.log(e);
	}
};
